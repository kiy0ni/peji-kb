<%
  // ==============================================================================
  // PARTIAL: NAVIGATION RAIL
  // ==============================================================================
  /**
   * @fileoverview Renders the fixed, slim left-hand navigation sidebar (Nav Rail).
   * This component provides access to core application sections (Home, Browse, Settings).
   *
   * @param {string} [currentPath] - The URL path of the currently active page.
   * Used to apply the 'active' class for visual feedback.
   */
  // ==============================================================================
%>

<aside class="nav-rail">

  <div class="brand">
    <div class="logo-container">
      <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
         <rect width="18" height="18" rx="5" fill="#A78BFA"/>
         <rect x="22" width="18" height="18" rx="5" fill="#F472B6"/>
         <rect y="22" width="18" height="18" rx="5" fill="#34D399"/>
         <rect x="22" y="22" width="18" height="18" rx="5" fill="#60A5FA"/>
      </svg>
    </div>
  </div>

  <nav class="nav-icons">

    <%
      // Condition: Active if currentPath is null/undefined or exactly the root path '/'.
      const isHomeActive = (!currentPath || currentPath === '/');
    %>
    <a href="/"
       class="nav-item <%= isHomeActive ? 'active' : '' %>"
       aria-label="Home">
      <i class="ph ph-house"></i>
    </a>

    <%
      // Condition: Active if currentPath exists and starts with '/browse' (handles sub-paths like /browse/folder).
      const isBrowseActive = (currentPath && currentPath.startsWith('/browse'));
    %>
    <a href="/browse"
       class="nav-item <%= isBrowseActive ? 'active' : '' %>"
       aria-label="Browse">
      <i class="ph ph-folders"></i>
    </a>

  </nav>

  <div class="nav-spacer"></div>

  <nav class="nav-icons footer">

    <%
      // Condition: Active if currentPath exists and starts with '/settings'.
      const isSettingsActive = (currentPath && currentPath.startsWith('/settings'));
    %>
    <a href="/settings"
       class="nav-item <%= isSettingsActive ? 'active' : '' %>"
       aria-label="Settings">
      <i class="ph ph-gear"></i>
    </a>

    <a href="/logout"
       class="nav-item"
       aria-label="Logout">
      <i class="ph ph-sign-out"></i>
    </a>

  </nav>

</aside>